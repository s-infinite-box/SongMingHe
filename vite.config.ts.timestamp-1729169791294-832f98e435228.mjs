// vite.config.ts
import { fileURLToPath, URL } from "node:url";
import { defineConfig } from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/vite@5.4.8_@types+node@20.16.10/node_modules/vite/dist/node/index.js";
import vue from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/@vitejs+plugin-vue@5.1.4_vite@5.4.8_@types+node@20.16.10__vue@3.5.10_typescript@5.4.5_/node_modules/@vitejs/plugin-vue/dist/index.mjs";
import vueJsx from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/@vitejs+plugin-vue-jsx@4.0.1_vite@5.4.8_@types+node@20.16.10__vue@3.5.10_typescript@5.4.5_/node_modules/@vitejs/plugin-vue-jsx/dist/index.mjs";

// build.ts
import * as fs2 from "fs";
import grayMatter from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/gray-matter@4.0.3/node_modules/gray-matter/index.js";

// buildUtils.ts
import MarkdownIt from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/markdown-it@14.1.0/node_modules/markdown-it/index.mjs";
import * as fs from "fs";
var formateDate = (srcDate) => {
  let srcDateObj = srcDate;
  if (typeof srcDate === "string") {
    srcDateObj = new Date(Date.parse(srcDate));
  }
  return `${srcDateObj.getFullYear()}-${String(srcDateObj.getMonth() + 1).padStart(2, "0")}-${String(srcDateObj.getDate()).padStart(2, "0")}`;
};
var rmdir = (rmdirPath) => {
  try {
    fs.rmSync(rmdirPath, { recursive: true });
  } catch (err) {
    if (err && err.code !== "ENOENT") {
      throw err;
    }
  }
  fs.mkdirSync(rmdirPath);
};
var createMD = (imgPath) => {
  return MarkdownIt({
    html: true,
    // 在源码中启用 HTML 标签
    xhtmlOut: false,
    // 使用 '/' 来闭合单标签 （比如 <br />）。
    // 这个选项只对完全的 CommonMark 模式兼容。
    breaks: false,
    // 转换段落里的 '\n' 到 <br>。
    langPrefix: "language-",
    // 给围栏代码块的 CSS 语言前缀。对于额外的高亮代码非常有用。
    linkify: false,
    // 将类似 URL 的文本自动转换为链接。
    // 启用一些语言中立的替换 + 引号美化
    typographer: false,
    // 双 + 单引号替换对，当 typographer 启用时。
    // 或者智能引号等，可以是 String 或 Array。
    //
    // 比方说，你可以支持 '«»„“' 给俄罗斯人使用， '„“‚‘'  给德国人使用。
    // 还有 ['«\xA0', '\xA0»', '‹\xA0', '\xA0›'] 给法国人使用（包括 nbsp）。
    quotes: "\u201C\u201D\u2018\u2019",
    // 高亮函数，会返回转义的HTML。
    // 或 '' 如果源字符串未更改，则应在外部进行转义。
    // 如果结果以 <pre ... 开头，内部包装器则会跳过。
    highlight: function() {
      return "";
    }
  });
  md.use((md2) => {
    const rawImageRule = md2.renderer.rules.image;
    md2.renderer.rules.image = (tokens, idx, options, env, self) => {
      const token = tokens[idx];
      const link = token.attrGet("src");
      if (link) {
        token.attrSet("src", imgPath + link);
      }
      return rawImageRule(tokens, idx, options, env, self);
    };
    const createHtmlRule = (rawHtmlRule) => (tokens, idx, options, env, self) => {
      tokens[idx].content = tokens[idx].content.replace(
        /(<img\b.*?src=)(['"])(.*?)\2/gs,
        (_, prefix, quote, src) => `${prefix}${quote}${imgPath + src.trim()}${quote}`
      ).replace(
        /(<img\b.*?srcset=)(['"])(.*?)\2/gs,
        (_, prefix, quote, srcset) => `${prefix}${quote}${srcset.split(",").map(
          (item) => item.trim().replace(
            /^([^ ]*?)([ \n].*)?$/,
            (__, url, descriptor = "") => `${imgPath + url.trim()}${descriptor.replace(/[ \n]+/g, " ").trimEnd()}`
          )
        ).join(", ")}${quote}`
      );
      return rawHtmlRule(tokens, idx, options, env, self);
    };
    const rawHtmlBlockRule = md2.renderer.rules.html_block;
    const rawHtmlInlineRule = md2.renderer.rules.html_inline;
    md2.renderer.rules.html_block = createHtmlRule(rawHtmlBlockRule);
    md2.renderer.rules.html_inline = createHtmlRule(rawHtmlInlineRule);
  });
};
var err_throw = (error) => {
  if (error) {
    console.error(error);
    throw error;
  }
};

// build.ts
var build_default = (srcMDFilePath = `./src/md/`, mdPagesPath = "pages/", absMDPagesPath = `./src/assets/${mdPagesPath}`, imgPath = "/", absImgPath = `./public${imgPath}`) => {
  let blogPages = [];
  let tags = /* @__PURE__ */ new Map();
  let categories = /* @__PURE__ */ new Map();
  const md2 = createMD(imgPath);
  rmdir(absMDPagesPath);
  fs2.readdirSync(srcMDFilePath).forEach((file) => {
    const filePath = srcMDFilePath + file;
    if (!file.endsWith(".md")) {
      fs2.cpSync(filePath, absImgPath + file, { recursive: true });
      return;
    }
    const mdContent = fs2.readFileSync(filePath, "utf8");
    const { data, content } = grayMatter(mdContent, { excerpt: false });
    if (data.date) {
      data.date = formateDate(data.date);
    } else {
      data.date = formateDate(/* @__PURE__ */ new Date());
    }
    data.tag.forEach((tag) => tags.set(tag, ""));
    categories.set(data.category, "");
    const htmlContent = md2.render(content);
    fs2.writeFile(absMDPagesPath + file.replace(".md", ".html"), htmlContent, err_throw);
    blogPages.push({
      profile: data,
      htmlContent,
      path: `/${mdPagesPath}${file.replace(".md", ".html")}`,
      name: file.replace(".md", "")
    });
  });
  blogPages = blogPages.sort((a, b) => {
    return b.profile.date.localeCompare(a.profile.date);
  });
  fs2.writeFileSync(`${absMDPagesPath}blogPages.json`, JSON.stringify({
    blogPages,
    tags: Object.keys(tags),
    categories: Object.keys(categories)
  }));
};

// vite.config.ts
var __vite_injected_original_import_meta_url = "file:///P:/pphome/_SongMingHe/vite.config.ts";
build_default();
var vite_config_default = defineConfig({
  plugins: [
    vue(),
    vueJsx()
  ],
  resolve: {
    alias: {
      "@": fileURLToPath(new URL("./src", __vite_injected_original_import_meta_url))
    }
  },
  server: {
    // 监听地址 0.0.0.0
    host: true
  },
  // https://cn.vite.dev/config/shared-options.html#base
  base: "/SongMingHe/",
  build: {
    // outDir: '/SongMingHe/',
    // emptyOutDir: true,
  }
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiLCAiYnVpbGQudHMiLCAiYnVpbGRVdGlscy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIlA6XFxcXHBwaG9tZVxcXFxfU29uZ01pbmdIZVwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiUDpcXFxccHBob21lXFxcXF9Tb25nTWluZ0hlXFxcXHZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9QOi9wcGhvbWUvX1NvbmdNaW5nSGUvdml0ZS5jb25maWcudHNcIjtpbXBvcnQgeyBmaWxlVVJMVG9QYXRoLCBVUkwgfSBmcm9tICdub2RlOnVybCdcblxuaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSdcbmltcG9ydCB2dWUgZnJvbSAnQHZpdGVqcy9wbHVnaW4tdnVlJ1xuaW1wb3J0IHZ1ZUpzeCBmcm9tICdAdml0ZWpzL3BsdWdpbi12dWUtanN4J1xuXG5pbXBvcnQgYnVpbGQgZnJvbSAnLi9idWlsZCdcblxuYnVpbGQoKVxuXG4vLyBodHRwczovL2NuLnZpdGUuZGV2L2NvbmZpZy9cbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbmZpZyh7XG4gIHBsdWdpbnM6IFtcbiAgICB2dWUoKSxcbiAgICB2dWVKc3goKSxcbiAgXSxcbiAgcmVzb2x2ZToge1xuICAgIGFsaWFzOiB7XG4gICAgICAnQCc6IGZpbGVVUkxUb1BhdGgobmV3IFVSTCgnLi9zcmMnLCBpbXBvcnQubWV0YS51cmwpKVxuICAgIH1cbiAgfSxcbiAgc2VydmVyOiB7XG4gICAgLy8gXHU3NkQxXHU1NDJDXHU1NzMwXHU1NzQwIDAuMC4wLjBcbiAgICBob3N0OiB0cnVlLFxuICB9LFxuICAvLyBodHRwczovL2NuLnZpdGUuZGV2L2NvbmZpZy9zaGFyZWQtb3B0aW9ucy5odG1sI2Jhc2VcbiAgYmFzZTogJy9Tb25nTWluZ0hlLycsXG4gIGJ1aWxkOiB7XG4gICAgLy8gb3V0RGlyOiAnL1NvbmdNaW5nSGUvJyxcbiAgICAvLyBlbXB0eU91dERpcjogdHJ1ZSxcbiAgfVxufSlcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiUDpcXFxccHBob21lXFxcXF9Tb25nTWluZ0hlXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJQOlxcXFxwcGhvbWVcXFxcX1NvbmdNaW5nSGVcXFxcYnVpbGQudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL1A6L3BwaG9tZS9fU29uZ01pbmdIZS9idWlsZC50c1wiOy8vIGh0dHBzOi8vbm9kZWpzLm9yZy9kb2NzL2xhdGVzdC9hcGkvZnMuaHRtbFxuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnXG5pbXBvcnQgZ3JheU1hdHRlciBmcm9tICdncmF5LW1hdHRlcidcbmltcG9ydCB7IGNyZWF0ZU1ELCBybWRpciwgZm9ybWF0ZURhdGUsIGVycl90aHJvdyB9IGZyb20gJy4vYnVpbGRVdGlscydcblxuZXhwb3J0IGRlZmF1bHQgKFxuICBzcmNNREZpbGVQYXRoID0gYC4vc3JjL21kL2AsXG4gIG1kUGFnZXNQYXRoID0gJ3BhZ2VzLycsXG4gIGFic01EUGFnZXNQYXRoID0gYC4vc3JjL2Fzc2V0cy8ke21kUGFnZXNQYXRofWAsXG4gIC8vIGltZ1BhdGggPSAnL3BhZ2VzX2ltZy8nLFxuICBpbWdQYXRoID0gJy8nLFxuICBhYnNJbWdQYXRoID0gYC4vcHVibGljJHtpbWdQYXRofWBcbikgPT4ge1xuICBsZXQgYmxvZ1BhZ2VzID0gW11cbiAgbGV0IHRhZ3MgPSBuZXcgTWFwKCk7XG4gIGxldCBjYXRlZ29yaWVzID0gbmV3IE1hcCgpO1xuXG4gIC8vICBcdTUyMUJcdTVFRkFtZFx1ODlFM1x1Njc5MFx1NTY2OFxuICBjb25zdCBtZCA9IGNyZWF0ZU1EKGltZ1BhdGgpXG4gIC8vICBcdTZFMDVcdTc0MDZcdThGOTNcdTUxRkFcdTc2RUVcdTVGNTVcbiAgcm1kaXIoYWJzTURQYWdlc1BhdGgpXG4gIC8vIHJtZGlyKGFic0ltZ1BhdGgpXG5cbiAgLy8gIFx1OEJGQlx1NTNENm1kXHU2NTg3XHU0RUY2XHU1OTM5XHVGRjBDXHU1OTA0XHU3NDA2bWRcdTY1ODdcdTRFRjZcbiAgZnMucmVhZGRpclN5bmMoc3JjTURGaWxlUGF0aCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgIGNvbnN0IGZpbGVQYXRoID0gc3JjTURGaWxlUGF0aCArIGZpbGVcbiAgICAvLyBcdTk3NUVtZFx1NjU4N1x1NEVGNlx1NEY1Q1x1NEUzQVx1OTc1OVx1NjAwMVx1OEQ0NFx1NkU5MFx1RkYwQ1x1NjMwOVx1OERFRlx1NUY4NFx1NTkwRFx1NTIzNlxuICAgIGlmICghZmlsZS5lbmRzV2l0aCgnLm1kJykpIHtcbiAgICAgIGZzLmNwU3luYyhmaWxlUGF0aCwgYWJzSW1nUGF0aCArIGZpbGUsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gXHU4QkZCXHU1M0Q2bWRcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcbiAgICBjb25zdCBtZENvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4JylcbiAgICBjb25zdCB7IGRhdGEsIGNvbnRlbnQgfSA9IGdyYXlNYXR0ZXIobWRDb250ZW50LCB7IGV4Y2VycHQ6IGZhbHNlIH0pXG4gICAgaWYgKGRhdGEuZGF0ZSkge1xuICAgICAgZGF0YS5kYXRlID0gZm9ybWF0ZURhdGUoZGF0YS5kYXRlKVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmRhdGUgPSBmb3JtYXRlRGF0ZShuZXcgRGF0ZSgpKVxuICAgIH1cbiAgICBkYXRhLnRhZy5mb3JFYWNoKHRhZyA9PiB0YWdzLnNldCh0YWcsIFwiXCIpKVxuICAgIGNhdGVnb3JpZXMuc2V0KGRhdGEuY2F0ZWdvcnksIFwiXCIpXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBtZC5yZW5kZXIoY29udGVudClcbiAgICBmcy53cml0ZUZpbGUoYWJzTURQYWdlc1BhdGggKyBmaWxlLnJlcGxhY2UoJy5tZCcsICcuaHRtbCcpLCBodG1sQ29udGVudCwgZXJyX3Rocm93KVxuICAgIGJsb2dQYWdlcy5wdXNoKHtcbiAgICAgIHByb2ZpbGU6IGRhdGEsXG4gICAgICBodG1sQ29udGVudCxcbiAgICAgIHBhdGg6IGAvJHttZFBhZ2VzUGF0aH0ke2ZpbGUucmVwbGFjZSgnLm1kJywgJy5odG1sJyl9YCxcbiAgICAgIG5hbWU6IGZpbGUucmVwbGFjZSgnLm1kJywgJycpXG4gICAgfSlcbiAgfSlcbiAgYmxvZ1BhZ2VzID0gYmxvZ1BhZ2VzLnNvcnQoKGEsIGIpID0+IHtcbiAgICByZXR1cm4gYi5wcm9maWxlLmRhdGUubG9jYWxlQ29tcGFyZShhLnByb2ZpbGUuZGF0ZSlcbiAgfSlcbiAgZnMud3JpdGVGaWxlU3luYyhgJHthYnNNRFBhZ2VzUGF0aH1ibG9nUGFnZXMuanNvbmAsIEpTT04uc3RyaW5naWZ5KHtcbiAgICBibG9nUGFnZXMsIHRhZ3M6IE9iamVjdC5rZXlzKHRhZ3MpLCBjYXRlZ29yaWVzOiBPYmplY3Qua2V5cyhjYXRlZ29yaWVzKVxuICB9KSlcbn1cbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiUDpcXFxccHBob21lXFxcXF9Tb25nTWluZ0hlXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJQOlxcXFxwcGhvbWVcXFxcX1NvbmdNaW5nSGVcXFxcYnVpbGRVdGlscy50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vUDovcHBob21lL19Tb25nTWluZ0hlL2J1aWxkVXRpbHMudHNcIjtpbXBvcnQgTWFya2Rvd25JdCBmcm9tICdtYXJrZG93bi1pdCdcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJ1xuXG5jb25zdCBmb3JtYXRlRGF0ZSA9IChzcmNEYXRlOiBEYXRlIHwgc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgbGV0IHNyY0RhdGVPYmogPSBzcmNEYXRlXG4gIGlmICh0eXBlb2Ygc3JjRGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICBzcmNEYXRlT2JqID0gbmV3IERhdGUoRGF0ZS5wYXJzZShzcmNEYXRlKSlcbiAgfVxuICAvLyBsZXQgaG91cnMgPSBTdHJpbmcoc3JjRGF0ZU9iai5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpXG4gIC8vIGxldCBtaW51dGVzID0gU3RyaW5nKHNyY0RhdGVPYmouZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpXG4gIC8vIGxldCBzZWNvbmRzID0gU3RyaW5nKHNyY0RhdGVPYmouZ2V0U2Vjb25kcygpKS5wYWRTdGFydCgyLCAnMCcpXG5cbiAgcmV0dXJuIGAke3NyY0RhdGVPYmouZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcoc3JjRGF0ZU9iai5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtTdHJpbmcoc3JjRGF0ZU9iai5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9YFxufVxuXG4vLyAgXHU2RTA1XHU3NDA2XHU3NkVFXHU1RjU1XG5jb25zdCBybWRpciA9IChybWRpclBhdGgpID0+IHtcbiAgdHJ5IHtcbiAgICBmcy5ybVN5bmMocm1kaXJQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyICYmIGVyci5jb2RlICE9PSAnRU5PRU5UJykge1xuICAgICAgdGhyb3cgZXJyXG4gICAgfVxuICB9XG4gIC8vICBcdTkxQ0RcdTY1QjBcdTUyMUJcdTVFRkFcdTc2RUVcdTVGNTVcbiAgZnMubWtkaXJTeW5jKHJtZGlyUGF0aClcbn1cbmNvbnN0IGNyZWF0ZU1EID0gKGltZ1BhdGg6IHN0cmluZyk6IE1hcmtkb3duSXQgPT4ge1xuICByZXR1cm4gTWFya2Rvd25JdCh7XG4gICAgaHRtbDogdHJ1ZSwgLy8gXHU1NzI4XHU2RTkwXHU3ODAxXHU0RTJEXHU1NDJGXHU3NTI4IEhUTUwgXHU2ODA3XHU3QjdFXG4gICAgeGh0bWxPdXQ6IGZhbHNlLCAvLyBcdTRGN0ZcdTc1MjggJy8nIFx1Njc2NVx1OTVFRFx1NTQwOFx1NTM1NVx1NjgwN1x1N0I3RSBcdUZGMDhcdTZCRDRcdTU5ODIgPGJyIC8+XHVGRjA5XHUzMDAyXG4gICAgLy8gXHU4RkQ5XHU0RTJBXHU5MDA5XHU5ODc5XHU1M0VBXHU1QkY5XHU1QjhDXHU1MTY4XHU3Njg0IENvbW1vbk1hcmsgXHU2QTIxXHU1RjBGXHU1MTdDXHU1QkI5XHUzMDAyXG4gICAgYnJlYWtzOiBmYWxzZSwgLy8gXHU4RjZDXHU2MzYyXHU2QkI1XHU4NDNEXHU5MUNDXHU3Njg0ICdcXG4nIFx1NTIzMCA8YnI+XHUzMDAyXG4gICAgbGFuZ1ByZWZpeDogJ2xhbmd1YWdlLScsIC8vIFx1N0VEOVx1NTZGNFx1NjgwRlx1NEVFM1x1NzgwMVx1NTc1N1x1NzY4NCBDU1MgXHU4QkVEXHU4QTAwXHU1MjREXHU3RjAwXHUzMDAyXHU1QkY5XHU0RThFXHU5ODlEXHU1OTE2XHU3Njg0XHU5QUQ4XHU0RUFFXHU0RUUzXHU3ODAxXHU5NzVFXHU1RTM4XHU2NzA5XHU3NTI4XHUzMDAyXG4gICAgbGlua2lmeTogZmFsc2UsIC8vIFx1NUMwNlx1N0M3Qlx1NEYzQyBVUkwgXHU3Njg0XHU2NTg3XHU2NzJDXHU4MUVBXHU1MkE4XHU4RjZDXHU2MzYyXHU0RTNBXHU5NEZFXHU2M0E1XHUzMDAyXG5cbiAgICAvLyBcdTU0MkZcdTc1MjhcdTRFMDBcdTRFOUJcdThCRURcdThBMDBcdTRFMkRcdTdBQ0JcdTc2ODRcdTY2RkZcdTYzNjIgKyBcdTVGMTVcdTUzRjdcdTdGOEVcdTUzMTZcbiAgICB0eXBvZ3JhcGhlcjogZmFsc2UsXG5cbiAgICAvLyBcdTUzQ0MgKyBcdTUzNTVcdTVGMTVcdTUzRjdcdTY2RkZcdTYzNjJcdTVCRjlcdUZGMENcdTVGNTMgdHlwb2dyYXBoZXIgXHU1NDJGXHU3NTI4XHU2NUY2XHUzMDAyXG4gICAgLy8gXHU2MjE2XHU4MDA1XHU2NjdBXHU4MEZEXHU1RjE1XHU1M0Y3XHU3QjQ5XHVGRjBDXHU1M0VGXHU0RUU1XHU2NjJGIFN0cmluZyBcdTYyMTYgQXJyYXlcdTMwMDJcbiAgICAvL1xuICAgIC8vIFx1NkJENFx1NjVCOVx1OEJGNFx1RkYwQ1x1NEY2MFx1NTNFRlx1NEVFNVx1NjUyRlx1NjMwMSAnXHUwMEFCXHUwMEJCXHUyMDFFXHUyMDFDJyBcdTdFRDlcdTRGQzRcdTdGNTdcdTY1QUZcdTRFQkFcdTRGN0ZcdTc1MjhcdUZGMEMgJ1x1MjAxRVx1MjAxQ1x1MjAxQVx1MjAxOCcgIFx1N0VEOVx1NUZCN1x1NTZGRFx1NEVCQVx1NEY3Rlx1NzUyOFx1MzAwMlxuICAgIC8vIFx1OEZEOFx1NjcwOSBbJ1x1MDBBQlxceEEwJywgJ1xceEEwXHUwMEJCJywgJ1x1MjAzOVxceEEwJywgJ1xceEEwXHUyMDNBJ10gXHU3RUQ5XHU2Q0Q1XHU1NkZEXHU0RUJBXHU0RjdGXHU3NTI4XHVGRjA4XHU1MzA1XHU2MkVDIG5ic3BcdUZGMDlcdTMwMDJcbiAgICBxdW90ZXM6ICdcdTIwMUNcdTIwMURcdTIwMThcdTIwMTknLFxuXG4gICAgLy8gXHU5QUQ4XHU0RUFFXHU1MUZEXHU2NTcwXHVGRjBDXHU0RjFBXHU4RkQ0XHU1NkRFXHU4RjZDXHU0RTQ5XHU3Njg0SFRNTFx1MzAwMlxuICAgIC8vIFx1NjIxNiAnJyBcdTU5ODJcdTY3OUNcdTZFOTBcdTVCNTdcdTdCMjZcdTRFMzJcdTY3MkFcdTY2RjRcdTY1MzlcdUZGMENcdTUyMTlcdTVFOTRcdTU3MjhcdTU5MTZcdTkwRThcdThGREJcdTg4NENcdThGNkNcdTRFNDlcdTMwMDJcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTdFRDNcdTY3OUNcdTRFRTUgPHByZSAuLi4gXHU1RjAwXHU1OTM0XHVGRjBDXHU1MTg1XHU5MEU4XHU1MzA1XHU4OEM1XHU1NjY4XHU1MjE5XHU0RjFBXHU4REYzXHU4RkM3XHUzMDAyXG4gICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiAoLypzdHIsIGxhbmcqLykge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICB9KVxuICAvLyBcdTU2RkVcdTcyNDdcdThERUZcdTVGODRcdTU5MDRcdTc0MDZcdTYzRDJcdTRFRjZcbiAgbWQudXNlKChtZCkgPT4ge1xuICAgIC8vIHdyYXAgcmF3IGltYWdlIHJlbmRlcmVyIHJ1bGVcbiAgICBjb25zdCByYXdJbWFnZVJ1bGUgPSBtZC5yZW5kZXJlci5ydWxlcy5pbWFnZSFcbiAgICBtZC5yZW5kZXJlci5ydWxlcy5pbWFnZSA9ICh0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52OiBNYXJrZG93bkVudiwgc2VsZikgPT4ge1xuICAgICAgY29uc3QgdG9rZW4gPSB0b2tlbnNbaWR4XVxuXG4gICAgICAvLyBnZXQgdGhlIGltYWdlIGxpbmtcbiAgICAgIGNvbnN0IGxpbmsgPSB0b2tlbi5hdHRyR2V0KCdzcmMnKVxuXG4gICAgICBpZiAobGluaykge1xuICAgICAgICAvLyByZXBsYWNlIHRoZSBvcmlnaW5hbCBsaW5rIHdpdGggcmVzb2x2ZWQgbGlua1xuICAgICAgICB0b2tlbi5hdHRyU2V0KCdzcmMnLCBpbWdQYXRoICsgbGluaylcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJhd0ltYWdlUnVsZSh0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52LCBzZWxmKVxuICAgIH1cblxuICAgIC8vIHdyYXAgcmF3IGh0bWwgcmVuZGVyZXIgcnVsZVxuICAgIGNvbnN0IGNyZWF0ZUh0bWxSdWxlID1cbiAgICAgIChyYXdIdG1sUnVsZTogUmVuZGVyUnVsZSk6IFJlbmRlclJ1bGUgPT5cbiAgICAgICh0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52OiBNYXJrZG93bkVudiwgc2VsZikgPT4ge1xuICAgICAgICAvLyByZXBsYWNlIHRoZSBvcmlnaW5hbCBsaW5rIHdpdGggcmVzb2x2ZWQgbGlua1xuICAgICAgICB0b2tlbnNbaWR4XS5jb250ZW50ID0gdG9rZW5zW2lkeF0uY29udGVudFxuICAgICAgICAgIC8vIGhhbmRsZSBzcmNcbiAgICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAgIC8oPGltZ1xcYi4qP3NyYz0pKFsnXCJdKSguKj8pXFwyL2dzLFxuICAgICAgICAgICAgKF8sIHByZWZpeDogc3RyaW5nLCBxdW90ZTogc3RyaW5nLCBzcmM6IHN0cmluZykgPT5cbiAgICAgICAgICAgICAgYCR7cHJlZml4fSR7cXVvdGV9JHtpbWdQYXRoICsgc3JjLnRyaW0oKX0ke3F1b3RlfWBcbiAgICAgICAgICApXG4gICAgICAgICAgLy8gaGFuZGxlIHNyY3NldFxuICAgICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgLyg8aW1nXFxiLio/c3Jjc2V0PSkoWydcIl0pKC4qPylcXDIvZ3MsXG4gICAgICAgICAgICAoXywgcHJlZml4OiBzdHJpbmcsIHF1b3RlOiBzdHJpbmcsIHNyY3NldDogc3RyaW5nKSA9PlxuICAgICAgICAgICAgICBgJHtwcmVmaXh9JHtxdW90ZX0ke3NyY3NldFxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLCcpXG4gICAgICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAvXihbXiBdKj8pKFsgXFxuXS4qKT8kLyxcbiAgICAgICAgICAgICAgICAgICAgICAoX18sIHVybDogc3RyaW5nLCBkZXNjcmlwdG9yOiBzdHJpbmcgfCB1bmRlZmluZWQgPSAnJykgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGAke2ltZ1BhdGggKyB1cmwudHJpbSgpfSR7ZGVzY3JpcHRvci5yZXBsYWNlKC9bIFxcbl0rL2csICcgJykudHJpbUVuZCgpfWBcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuam9pbignLCAnKX0ke3F1b3RlfWBcbiAgICAgICAgICApXG5cbiAgICAgICAgcmV0dXJuIHJhd0h0bWxSdWxlKHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYsIHNlbGYpXG4gICAgICB9XG4gICAgY29uc3QgcmF3SHRtbEJsb2NrUnVsZSA9IG1kLnJlbmRlcmVyLnJ1bGVzLmh0bWxfYmxvY2shXG4gICAgY29uc3QgcmF3SHRtbElubGluZVJ1bGUgPSBtZC5yZW5kZXJlci5ydWxlcy5odG1sX2lubGluZSFcbiAgICBtZC5yZW5kZXJlci5ydWxlcy5odG1sX2Jsb2NrID0gY3JlYXRlSHRtbFJ1bGUocmF3SHRtbEJsb2NrUnVsZSlcbiAgICBtZC5yZW5kZXJlci5ydWxlcy5odG1sX2lubGluZSA9IGNyZWF0ZUh0bWxSdWxlKHJhd0h0bWxJbmxpbmVSdWxlKVxuICB9KVxufVxuXG4vLyBcdTVGMDJcdTVFMzhcdTU5MDRcdTc0MDZcdTU2REVcdThDMDNcdTUxRkRcdTY1NzBcbmNvbnN0IGVycl90aHJvdyA9IChlcnJvcikgPT4ge1xuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuZXhwb3J0IHsgY3JlYXRlTUQsIHJtZGlyLCBmb3JtYXRlRGF0ZSwgZXJyX3Rocm93IH1cbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBdVAsU0FBUyxlQUFlLFdBQVc7QUFFMVIsU0FBUyxvQkFBb0I7QUFDN0IsT0FBTyxTQUFTO0FBQ2hCLE9BQU8sWUFBWTs7O0FDSG5CLFlBQVlBLFNBQVE7QUFDcEIsT0FBTyxnQkFBZ0I7OztBQ0Y4TixPQUFPLGdCQUFnQjtBQUM1USxZQUFZLFFBQVE7QUFFcEIsSUFBTSxjQUFjLENBQUMsWUFBbUM7QUFDdEQsTUFBSSxhQUFhO0FBQ2pCLE1BQUksT0FBTyxZQUFZLFVBQVU7QUFDL0IsaUJBQWEsSUFBSSxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUM7QUFBQSxFQUMzQztBQUtBLFNBQU8sR0FBRyxXQUFXLFlBQVksQ0FB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
