// vite.config.ts
import { fileURLToPath, URL } from "node:url";
import { defineConfig } from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/vite@5.4.8_@types+node@20.16.10/node_modules/vite/dist/node/index.js";
import vue from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/@vitejs+plugin-vue@5.1.4_vite@5.4.8_@types+node@20.16.10__vue@3.5.10_typescript@5.4.5_/node_modules/@vitejs/plugin-vue/dist/index.mjs";
import vueJsx from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/@vitejs+plugin-vue-jsx@4.0.1_vite@5.4.8_@types+node@20.16.10__vue@3.5.10_typescript@5.4.5_/node_modules/@vitejs/plugin-vue-jsx/dist/index.mjs";

// build.ts
import * as fs2 from "fs";
import grayMatter from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/gray-matter@4.0.3/node_modules/gray-matter/index.js";

// buildUtils.ts
import MarkdownIt from "file:///P:/pphome/_SongMingHe/node_modules/.pnpm/markdown-it@14.1.0/node_modules/markdown-it/index.mjs";
import * as fs from "fs";
var formateDate = (srcDate) => {
  let srcDateObj = srcDate;
  if (typeof srcDate === "string") {
    srcDateObj = new Date(Date.parse(srcDate));
  }
  return `${srcDateObj.getFullYear()}-${String(srcDateObj.getMonth() + 1).padStart(2, "0")}-${String(srcDateObj.getDate()).padStart(2, "0")}`;
};
var rmdir = (rmdirPath) => {
  try {
    fs.rmSync(rmdirPath, { recursive: true });
  } catch (err) {
    if (err && err.code !== "ENOENT") {
      throw err;
    }
  }
  fs.mkdirSync(rmdirPath);
};
var createMD = (imgPath) => {
  return MarkdownIt({
    html: true,
    // 在源码中启用 HTML 标签
    xhtmlOut: false,
    // 使用 '/' 来闭合单标签 （比如 <br />）。
    // 这个选项只对完全的 CommonMark 模式兼容。
    breaks: false,
    // 转换段落里的 '\n' 到 <br>。
    langPrefix: "language-",
    // 给围栏代码块的 CSS 语言前缀。对于额外的高亮代码非常有用。
    linkify: false,
    // 将类似 URL 的文本自动转换为链接。
    // 启用一些语言中立的替换 + 引号美化
    typographer: false,
    // 双 + 单引号替换对，当 typographer 启用时。
    // 或者智能引号等，可以是 String 或 Array。
    //
    // 比方说，你可以支持 '«»„“' 给俄罗斯人使用， '„“‚‘'  给德国人使用。
    // 还有 ['«\xA0', '\xA0»', '‹\xA0', '\xA0›'] 给法国人使用（包括 nbsp）。
    quotes: "\u201C\u201D\u2018\u2019",
    // 高亮函数，会返回转义的HTML。
    // 或 '' 如果源字符串未更改，则应在外部进行转义。
    // 如果结果以 <pre ... 开头，内部包装器则会跳过。
    highlight: function() {
      return "";
    }
  });
  md.use((md2) => {
    const rawImageRule = md2.renderer.rules.image;
    md2.renderer.rules.image = (tokens, idx, options, env, self) => {
      const token = tokens[idx];
      const link = token.attrGet("src");
      if (link) {
        token.attrSet("src", imgPath + link);
      }
      return rawImageRule(tokens, idx, options, env, self);
    };
    const createHtmlRule = (rawHtmlRule) => (tokens, idx, options, env, self) => {
      tokens[idx].content = tokens[idx].content.replace(
        /(<img\b.*?src=)(['"])(.*?)\2/gs,
        (_, prefix, quote, src) => `${prefix}${quote}${imgPath + src.trim()}${quote}`
      ).replace(
        /(<img\b.*?srcset=)(['"])(.*?)\2/gs,
        (_, prefix, quote, srcset) => `${prefix}${quote}${srcset.split(",").map(
          (item) => item.trim().replace(
            /^([^ ]*?)([ \n].*)?$/,
            (__, url, descriptor = "") => `${imgPath + url.trim()}${descriptor.replace(/[ \n]+/g, " ").trimEnd()}`
          )
        ).join(", ")}${quote}`
      );
      return rawHtmlRule(tokens, idx, options, env, self);
    };
    const rawHtmlBlockRule = md2.renderer.rules.html_block;
    const rawHtmlInlineRule = md2.renderer.rules.html_inline;
    md2.renderer.rules.html_block = createHtmlRule(rawHtmlBlockRule);
    md2.renderer.rules.html_inline = createHtmlRule(rawHtmlInlineRule);
  });
};
var err_throw = (error) => {
  if (error) {
    console.error(error);
    throw error;
  }
};

// build.ts
var build_default = (srcMDFilePath = `./src/md/`, mdPagesPath = "pages/", absMDPagesPath = `./src/assets/${mdPagesPath}`, imgPath = "/", absImgPath = `./public${imgPath}`) => {
  let blogPages = [];
  let tags = /* @__PURE__ */ new Map();
  let categories = /* @__PURE__ */ new Map();
  const md2 = createMD(imgPath);
  rmdir(absMDPagesPath);
  fs2.readdirSync(srcMDFilePath).forEach((file) => {
    const filePath = srcMDFilePath + file;
    if (!file.endsWith(".md")) {
      fs2.cpSync(filePath, absImgPath + file, { recursive: true });
      return;
    }
    const mdContent = fs2.readFileSync(filePath, "utf8");
    const { data, content } = grayMatter(mdContent, { excerpt: false });
    if (data.date) {
      data.date = formateDate(data.date);
    } else {
      data.date = formateDate(/* @__PURE__ */ new Date());
    }
    data.tag.forEach((tag) => tags.set(tag, ""));
    categories.set(data.category, "");
    const htmlContent = md2.render(content);
    fs2.writeFile(absMDPagesPath + file.replace(".md", ".html"), htmlContent, err_throw);
    blogPages.push({
      profile: data,
      htmlContent,
      path: `/${mdPagesPath}${file.replace(".md", ".html")}`,
      name: file.replace(".md", "")
    });
  });
  blogPages = blogPages.sort((a, b) => {
    return b.profile.date.localeCompare(a.profile.date);
  });
  let originalList = {
    blogPages,
    tags: tags.keys(),
    categories: categories.keys()
  };
  fs2.writeFileSync(`${absMDPagesPath}blogPages.json`, JSON.stringify(originalList));
};

// vite.config.ts
var __vite_injected_original_import_meta_url = "file:///P:/pphome/_SongMingHe/vite.config.ts";
build_default();
var vite_config_default = defineConfig({
  plugins: [
    vue(),
    vueJsx()
  ],
  resolve: {
    alias: {
      "@": fileURLToPath(new URL("./src", __vite_injected_original_import_meta_url))
    }
  },
  server: {
    // 监听地址 0.0.0.0
    host: true
  },
  // https://cn.vite.dev/config/shared-options.html#base
  base: "/SongMingHe/",
  build: {
    // outDir: '/SongMingHe/',
    // emptyOutDir: true,
  }
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiLCAiYnVpbGQudHMiLCAiYnVpbGRVdGlscy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIlA6XFxcXHBwaG9tZVxcXFxfU29uZ01pbmdIZVwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiUDpcXFxccHBob21lXFxcXF9Tb25nTWluZ0hlXFxcXHZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9QOi9wcGhvbWUvX1NvbmdNaW5nSGUvdml0ZS5jb25maWcudHNcIjtpbXBvcnQgeyBmaWxlVVJMVG9QYXRoLCBVUkwgfSBmcm9tICdub2RlOnVybCdcblxuaW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSdcbmltcG9ydCB2dWUgZnJvbSAnQHZpdGVqcy9wbHVnaW4tdnVlJ1xuaW1wb3J0IHZ1ZUpzeCBmcm9tICdAdml0ZWpzL3BsdWdpbi12dWUtanN4J1xuXG5pbXBvcnQgYnVpbGQgZnJvbSAnLi9idWlsZCdcblxuYnVpbGQoKVxuXG4vLyBodHRwczovL2NuLnZpdGUuZGV2L2NvbmZpZy9cbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbmZpZyh7XG4gIHBsdWdpbnM6IFtcbiAgICB2dWUoKSxcbiAgICB2dWVKc3goKSxcbiAgXSxcbiAgcmVzb2x2ZToge1xuICAgIGFsaWFzOiB7XG4gICAgICAnQCc6IGZpbGVVUkxUb1BhdGgobmV3IFVSTCgnLi9zcmMnLCBpbXBvcnQubWV0YS51cmwpKVxuICAgIH1cbiAgfSxcbiAgc2VydmVyOiB7XG4gICAgLy8gXHU3NkQxXHU1NDJDXHU1NzMwXHU1NzQwIDAuMC4wLjBcbiAgICBob3N0OiB0cnVlLFxuICB9LFxuICAvLyBodHRwczovL2NuLnZpdGUuZGV2L2NvbmZpZy9zaGFyZWQtb3B0aW9ucy5odG1sI2Jhc2VcbiAgYmFzZTogJy9Tb25nTWluZ0hlLycsXG4gIGJ1aWxkOiB7XG4gICAgLy8gb3V0RGlyOiAnL1NvbmdNaW5nSGUvJyxcbiAgICAvLyBlbXB0eU91dERpcjogdHJ1ZSxcbiAgfVxufSlcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiUDpcXFxccHBob21lXFxcXF9Tb25nTWluZ0hlXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJQOlxcXFxwcGhvbWVcXFxcX1NvbmdNaW5nSGVcXFxcYnVpbGQudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL1A6L3BwaG9tZS9fU29uZ01pbmdIZS9idWlsZC50c1wiOy8vIGh0dHBzOi8vbm9kZWpzLm9yZy9kb2NzL2xhdGVzdC9hcGkvZnMuaHRtbFxuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnXG5pbXBvcnQgZ3JheU1hdHRlciBmcm9tICdncmF5LW1hdHRlcidcbmltcG9ydCB7IGNyZWF0ZU1ELCBybWRpciwgZm9ybWF0ZURhdGUsIGVycl90aHJvdyB9IGZyb20gJy4vYnVpbGRVdGlscydcblxuZXhwb3J0IGRlZmF1bHQgKFxuICBzcmNNREZpbGVQYXRoID0gYC4vc3JjL21kL2AsXG4gIG1kUGFnZXNQYXRoID0gJ3BhZ2VzLycsXG4gIGFic01EUGFnZXNQYXRoID0gYC4vc3JjL2Fzc2V0cy8ke21kUGFnZXNQYXRofWAsXG4gIC8vIGltZ1BhdGggPSAnL3BhZ2VzX2ltZy8nLFxuICBpbWdQYXRoID0gJy8nLFxuICBhYnNJbWdQYXRoID0gYC4vcHVibGljJHtpbWdQYXRofWBcbikgPT4ge1xuICBsZXQgYmxvZ1BhZ2VzID0gW11cbiAgbGV0IHRhZ3MgPSBuZXcgTWFwKClcbiAgbGV0IGNhdGVnb3JpZXMgPSBuZXcgTWFwKClcblxuICAvLyAgXHU1MjFCXHU1RUZBbWRcdTg5RTNcdTY3OTBcdTU2NjhcbiAgY29uc3QgbWQgPSBjcmVhdGVNRChpbWdQYXRoKVxuICAvLyAgXHU2RTA1XHU3NDA2XHU4RjkzXHU1MUZBXHU3NkVFXHU1RjU1XG4gIHJtZGlyKGFic01EUGFnZXNQYXRoKVxuICAvLyBybWRpcihhYnNJbWdQYXRoKVxuXG4gIC8vICBcdThCRkJcdTUzRDZtZFx1NjU4N1x1NEVGNlx1NTkzOVx1RkYwQ1x1NTkwNFx1NzQwNm1kXHU2NTg3XHU0RUY2XG4gIGZzLnJlYWRkaXJTeW5jKHNyY01ERmlsZVBhdGgpLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHNyY01ERmlsZVBhdGggKyBmaWxlXG4gICAgLy8gXHU5NzVFbWRcdTY1ODdcdTRFRjZcdTRGNUNcdTRFM0FcdTk3NTlcdTYwMDFcdThENDRcdTZFOTBcdUZGMENcdTYzMDlcdThERUZcdTVGODRcdTU5MERcdTUyMzZcbiAgICBpZiAoIWZpbGUuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICBmcy5jcFN5bmMoZmlsZVBhdGgsIGFic0ltZ1BhdGggKyBmaWxlLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIFx1OEJGQlx1NTNENm1kXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XG4gICAgY29uc3QgbWRDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoLCAndXRmOCcpXG4gICAgY29uc3QgeyBkYXRhLCBjb250ZW50IH0gPSBncmF5TWF0dGVyKG1kQ29udGVudCwgeyBleGNlcnB0OiBmYWxzZSB9KVxuICAgIGlmIChkYXRhLmRhdGUpIHtcbiAgICAgIGRhdGEuZGF0ZSA9IGZvcm1hdGVEYXRlKGRhdGEuZGF0ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5kYXRlID0gZm9ybWF0ZURhdGUobmV3IERhdGUoKSlcbiAgICB9XG4gICAgZGF0YS50YWcuZm9yRWFjaCh0YWcgPT4gdGFncy5zZXQodGFnLCAnJykpXG4gICAgY2F0ZWdvcmllcy5zZXQoZGF0YS5jYXRlZ29yeSwgJycpXG4gICAgY29uc3QgaHRtbENvbnRlbnQgPSBtZC5yZW5kZXIoY29udGVudClcbiAgICBmcy53cml0ZUZpbGUoYWJzTURQYWdlc1BhdGggKyBmaWxlLnJlcGxhY2UoJy5tZCcsICcuaHRtbCcpLCBodG1sQ29udGVudCwgZXJyX3Rocm93KVxuICAgIGJsb2dQYWdlcy5wdXNoKHtcbiAgICAgIHByb2ZpbGU6IGRhdGEsXG4gICAgICBodG1sQ29udGVudCxcbiAgICAgIHBhdGg6IGAvJHttZFBhZ2VzUGF0aH0ke2ZpbGUucmVwbGFjZSgnLm1kJywgJy5odG1sJyl9YCxcbiAgICAgIG5hbWU6IGZpbGUucmVwbGFjZSgnLm1kJywgJycpXG4gICAgfSlcbiAgfSlcbiAgYmxvZ1BhZ2VzID0gYmxvZ1BhZ2VzLnNvcnQoKGEsIGIpID0+IHtcbiAgICByZXR1cm4gYi5wcm9maWxlLmRhdGUubG9jYWxlQ29tcGFyZShhLnByb2ZpbGUuZGF0ZSlcbiAgfSlcbiAgbGV0IG9yaWdpbmFsTGlzdCA9IHtcbiAgICBibG9nUGFnZXMsIHRhZ3M6IHRhZ3Mua2V5cygpLCBjYXRlZ29yaWVzOiBjYXRlZ29yaWVzLmtleXMoKVxuICB9XG4gIGZzLndyaXRlRmlsZVN5bmMoYCR7YWJzTURQYWdlc1BhdGh9YmxvZ1BhZ2VzLmpzb25gLCBKU09OLnN0cmluZ2lmeShvcmlnaW5hbExpc3QpKVxufVxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJQOlxcXFxwcGhvbWVcXFxcX1NvbmdNaW5nSGVcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIlA6XFxcXHBwaG9tZVxcXFxfU29uZ01pbmdIZVxcXFxidWlsZFV0aWxzLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9QOi9wcGhvbWUvX1NvbmdNaW5nSGUvYnVpbGRVdGlscy50c1wiO2ltcG9ydCBNYXJrZG93bkl0IGZyb20gJ21hcmtkb3duLWl0J1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnXG5cbmNvbnN0IGZvcm1hdGVEYXRlID0gKHNyY0RhdGU6IERhdGUgfCBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBsZXQgc3JjRGF0ZU9iaiA9IHNyY0RhdGVcbiAgaWYgKHR5cGVvZiBzcmNEYXRlID09PSAnc3RyaW5nJykge1xuICAgIHNyY0RhdGVPYmogPSBuZXcgRGF0ZShEYXRlLnBhcnNlKHNyY0RhdGUpKVxuICB9XG4gIC8vIGxldCBob3VycyA9IFN0cmluZyhzcmNEYXRlT2JqLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgLy8gbGV0IG1pbnV0ZXMgPSBTdHJpbmcoc3JjRGF0ZU9iai5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJylcbiAgLy8gbGV0IHNlY29uZHMgPSBTdHJpbmcoc3JjRGF0ZU9iai5nZXRTZWNvbmRzKCkpLnBhZFN0YXJ0KDIsICcwJylcblxuICByZXR1cm4gYCR7c3JjRGF0ZU9iai5nZXRGdWxsWWVhcigpfS0ke1N0cmluZyhzcmNEYXRlT2JqLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhzcmNEYXRlT2JqLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKX1gXG59XG5cbi8vICBcdTZFMDVcdTc0MDZcdTc2RUVcdTVGNTVcbmNvbnN0IHJtZGlyID0gKHJtZGlyUGF0aCkgPT4ge1xuICB0cnkge1xuICAgIGZzLnJtU3luYyhybWRpclBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgIT09ICdFTk9FTlQnKSB7XG4gICAgICB0aHJvdyBlcnJcbiAgICB9XG4gIH1cbiAgLy8gIFx1OTFDRFx1NjVCMFx1NTIxQlx1NUVGQVx1NzZFRVx1NUY1NVxuICBmcy5ta2RpclN5bmMocm1kaXJQYXRoKVxufVxuY29uc3QgY3JlYXRlTUQgPSAoaW1nUGF0aDogc3RyaW5nKTogTWFya2Rvd25JdCA9PiB7XG4gIHJldHVybiBNYXJrZG93bkl0KHtcbiAgICBodG1sOiB0cnVlLCAvLyBcdTU3MjhcdTZFOTBcdTc4MDFcdTRFMkRcdTU0MkZcdTc1MjggSFRNTCBcdTY4MDdcdTdCN0VcbiAgICB4aHRtbE91dDogZmFsc2UsIC8vIFx1NEY3Rlx1NzUyOCAnLycgXHU2NzY1XHU5NUVEXHU1NDA4XHU1MzU1XHU2ODA3XHU3QjdFIFx1RkYwOFx1NkJENFx1NTk4MiA8YnIgLz5cdUZGMDlcdTMwMDJcbiAgICAvLyBcdThGRDlcdTRFMkFcdTkwMDlcdTk4NzlcdTUzRUFcdTVCRjlcdTVCOENcdTUxNjhcdTc2ODQgQ29tbW9uTWFyayBcdTZBMjFcdTVGMEZcdTUxN0NcdTVCQjlcdTMwMDJcbiAgICBicmVha3M6IGZhbHNlLCAvLyBcdThGNkNcdTYzNjJcdTZCQjVcdTg0M0RcdTkxQ0NcdTc2ODQgJ1xcbicgXHU1MjMwIDxicj5cdTMwMDJcbiAgICBsYW5nUHJlZml4OiAnbGFuZ3VhZ2UtJywgLy8gXHU3RUQ5XHU1NkY0XHU2ODBGXHU0RUUzXHU3ODAxXHU1NzU3XHU3Njg0IENTUyBcdThCRURcdThBMDBcdTUyNERcdTdGMDBcdTMwMDJcdTVCRjlcdTRFOEVcdTk4OURcdTU5MTZcdTc2ODRcdTlBRDhcdTRFQUVcdTRFRTNcdTc4MDFcdTk3NUVcdTVFMzhcdTY3MDlcdTc1MjhcdTMwMDJcbiAgICBsaW5raWZ5OiBmYWxzZSwgLy8gXHU1QzA2XHU3QzdCXHU0RjNDIFVSTCBcdTc2ODRcdTY1ODdcdTY3MkNcdTgxRUFcdTUyQThcdThGNkNcdTYzNjJcdTRFM0FcdTk0RkVcdTYzQTVcdTMwMDJcblxuICAgIC8vIFx1NTQyRlx1NzUyOFx1NEUwMFx1NEU5Qlx1OEJFRFx1OEEwMFx1NEUyRFx1N0FDQlx1NzY4NFx1NjZGRlx1NjM2MiArIFx1NUYxNVx1NTNGN1x1N0Y4RVx1NTMxNlxuICAgIHR5cG9ncmFwaGVyOiBmYWxzZSxcblxuICAgIC8vIFx1NTNDQyArIFx1NTM1NVx1NUYxNVx1NTNGN1x1NjZGRlx1NjM2Mlx1NUJGOVx1RkYwQ1x1NUY1MyB0eXBvZ3JhcGhlciBcdTU0MkZcdTc1MjhcdTY1RjZcdTMwMDJcbiAgICAvLyBcdTYyMTZcdTgwMDVcdTY2N0FcdTgwRkRcdTVGMTVcdTUzRjdcdTdCNDlcdUZGMENcdTUzRUZcdTRFRTVcdTY2MkYgU3RyaW5nIFx1NjIxNiBBcnJheVx1MzAwMlxuICAgIC8vXG4gICAgLy8gXHU2QkQ0XHU2NUI5XHU4QkY0XHVGRjBDXHU0RjYwXHU1M0VGXHU0RUU1XHU2NTJGXHU2MzAxICdcdTAwQUJcdTAwQkJcdTIwMUVcdTIwMUMnIFx1N0VEOVx1NEZDNFx1N0Y1N1x1NjVBRlx1NEVCQVx1NEY3Rlx1NzUyOFx1RkYwQyAnXHUyMDFFXHUyMDFDXHUyMDFBXHUyMDE4JyAgXHU3RUQ5XHU1RkI3XHU1NkZEXHU0RUJBXHU0RjdGXHU3NTI4XHUzMDAyXG4gICAgLy8gXHU4RkQ4XHU2NzA5IFsnXHUwMEFCXFx4QTAnLCAnXFx4QTBcdTAwQkInLCAnXHUyMDM5XFx4QTAnLCAnXFx4QTBcdTIwM0EnXSBcdTdFRDlcdTZDRDVcdTU2RkRcdTRFQkFcdTRGN0ZcdTc1MjhcdUZGMDhcdTUzMDVcdTYyRUMgbmJzcFx1RkYwOVx1MzAwMlxuICAgIHF1b3RlczogJ1x1MjAxQ1x1MjAxRFx1MjAxOFx1MjAxOScsXG5cbiAgICAvLyBcdTlBRDhcdTRFQUVcdTUxRkRcdTY1NzBcdUZGMENcdTRGMUFcdThGRDRcdTU2REVcdThGNkNcdTRFNDlcdTc2ODRIVE1MXHUzMDAyXG4gICAgLy8gXHU2MjE2ICcnIFx1NTk4Mlx1Njc5Q1x1NkU5MFx1NUI1N1x1N0IyNlx1NEUzMlx1NjcyQVx1NjZGNFx1NjUzOVx1RkYwQ1x1NTIxOVx1NUU5NFx1NTcyOFx1NTkxNlx1OTBFOFx1OEZEQlx1ODg0Q1x1OEY2Q1x1NEU0OVx1MzAwMlxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1N0VEM1x1Njc5Q1x1NEVFNSA8cHJlIC4uLiBcdTVGMDBcdTU5MzRcdUZGMENcdTUxODVcdTkwRThcdTUzMDVcdTg4QzVcdTU2NjhcdTUyMTlcdTRGMUFcdThERjNcdThGQzdcdTMwMDJcbiAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uICgvKnN0ciwgbGFuZyovKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gIH0pXG4gIC8vIFx1NTZGRVx1NzI0N1x1OERFRlx1NUY4NFx1NTkwNFx1NzQwNlx1NjNEMlx1NEVGNlxuICBtZC51c2UoKG1kKSA9PiB7XG4gICAgLy8gd3JhcCByYXcgaW1hZ2UgcmVuZGVyZXIgcnVsZVxuICAgIGNvbnN0IHJhd0ltYWdlUnVsZSA9IG1kLnJlbmRlcmVyLnJ1bGVzLmltYWdlIVxuICAgIG1kLnJlbmRlcmVyLnJ1bGVzLmltYWdlID0gKHRva2VucywgaWR4LCBvcHRpb25zLCBlbnY6IE1hcmtkb3duRW52LCBzZWxmKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IHRva2Vuc1tpZHhdXG5cbiAgICAgIC8vIGdldCB0aGUgaW1hZ2UgbGlua1xuICAgICAgY29uc3QgbGluayA9IHRva2VuLmF0dHJHZXQoJ3NyYycpXG5cbiAgICAgIGlmIChsaW5rKSB7XG4gICAgICAgIC8vIHJlcGxhY2UgdGhlIG9yaWdpbmFsIGxpbmsgd2l0aCByZXNvbHZlZCBsaW5rXG4gICAgICAgIHRva2VuLmF0dHJTZXQoJ3NyYycsIGltZ1BhdGggKyBsaW5rKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmF3SW1hZ2VSdWxlKHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYsIHNlbGYpXG4gICAgfVxuXG4gICAgLy8gd3JhcCByYXcgaHRtbCByZW5kZXJlciBydWxlXG4gICAgY29uc3QgY3JlYXRlSHRtbFJ1bGUgPVxuICAgICAgKHJhd0h0bWxSdWxlOiBSZW5kZXJSdWxlKTogUmVuZGVyUnVsZSA9PlxuICAgICAgKHRva2VucywgaWR4LCBvcHRpb25zLCBlbnY6IE1hcmtkb3duRW52LCBzZWxmKSA9PiB7XG4gICAgICAgIC8vIHJlcGxhY2UgdGhlIG9yaWdpbmFsIGxpbmsgd2l0aCByZXNvbHZlZCBsaW5rXG4gICAgICAgIHRva2Vuc1tpZHhdLmNvbnRlbnQgPSB0b2tlbnNbaWR4XS5jb250ZW50XG4gICAgICAgICAgLy8gaGFuZGxlIHNyY1xuICAgICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgLyg8aW1nXFxiLio/c3JjPSkoWydcIl0pKC4qPylcXDIvZ3MsXG4gICAgICAgICAgICAoXywgcHJlZml4OiBzdHJpbmcsIHF1b3RlOiBzdHJpbmcsIHNyYzogc3RyaW5nKSA9PlxuICAgICAgICAgICAgICBgJHtwcmVmaXh9JHtxdW90ZX0ke2ltZ1BhdGggKyBzcmMudHJpbSgpfSR7cXVvdGV9YFxuICAgICAgICAgIClcbiAgICAgICAgICAvLyBoYW5kbGUgc3Jjc2V0XG4gICAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgICAgICAvKDxpbWdcXGIuKj9zcmNzZXQ9KShbJ1wiXSkoLio/KVxcMi9ncyxcbiAgICAgICAgICAgIChfLCBwcmVmaXg6IHN0cmluZywgcXVvdGU6IHN0cmluZywgc3Jjc2V0OiBzdHJpbmcpID0+XG4gICAgICAgICAgICAgIGAke3ByZWZpeH0ke3F1b3RlfSR7c3Jjc2V0XG4gICAgICAgICAgICAgICAgLnNwbGl0KCcsJylcbiAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgIC9eKFteIF0qPykoWyBcXG5dLiopPyQvLFxuICAgICAgICAgICAgICAgICAgICAgIChfXywgdXJsOiBzdHJpbmcsIGRlc2NyaXB0b3I6IHN0cmluZyB8IHVuZGVmaW5lZCA9ICcnKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7aW1nUGF0aCArIHVybC50cmltKCl9JHtkZXNjcmlwdG9yLnJlcGxhY2UoL1sgXFxuXSsvZywgJyAnKS50cmltRW5kKCl9YFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5qb2luKCcsICcpfSR7cXVvdGV9YFxuICAgICAgICAgIClcblxuICAgICAgICByZXR1cm4gcmF3SHRtbFJ1bGUodG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiwgc2VsZilcbiAgICAgIH1cbiAgICBjb25zdCByYXdIdG1sQmxvY2tSdWxlID0gbWQucmVuZGVyZXIucnVsZXMuaHRtbF9ibG9jayFcbiAgICBjb25zdCByYXdIdG1sSW5saW5lUnVsZSA9IG1kLnJlbmRlcmVyLnJ1bGVzLmh0bWxfaW5saW5lIVxuICAgIG1kLnJlbmRlcmVyLnJ1bGVzLmh0bWxfYmxvY2sgPSBjcmVhdGVIdG1sUnVsZShyYXdIdG1sQmxvY2tSdWxlKVxuICAgIG1kLnJlbmRlcmVyLnJ1bGVzLmh0bWxfaW5saW5lID0gY3JlYXRlSHRtbFJ1bGUocmF3SHRtbElubGluZVJ1bGUpXG4gIH0pXG59XG5cbi8vIFx1NUYwMlx1NUUzOFx1NTkwNFx1NzQwNlx1NTZERVx1OEMwM1x1NTFGRFx1NjU3MFxuY29uc3QgZXJyX3Rocm93ID0gKGVycm9yKSA9PiB7XG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG5leHBvcnQgeyBjcmVhdGVNRCwgcm1kaXIsIGZvcm1hdGVEYXRlLCBlcnJfdGhyb3cgfVxuIl0sCiAgIm1hcHBpbmdzIjogIjtBQUF1UCxTQUFTLGVBQWUsV0FBVztBQUUxUixTQUFTLG9CQUFvQjtBQUM3QixPQUFPLFNBQVM7QUFDaEIsT0FBTyxZQUFZOzs7QUNIbkIsWUFBWUEsU0FBUTtBQUNwQixPQUFPLGdCQUFnQjs7O0FDRjhOLE9BQU8sZ0JBQWdCO0FBQzVRLFlBQVksUUFBUTtBQUVwQixJQUFNLGNBQWMsQ0FBQyxZQUFtQztBQUN0RCxNQUFJLGFBQWE7QUFDakIsTUFBSSxPQUFPLFlBQVksVUFBVTtBQUMvQixpQkFBYSxJQUFJLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUFBLEVBQzNDO0FBS0EsU0FBTyxH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
